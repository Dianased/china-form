document.addEventListener("DOMContentLoaded",()=>{"function"==typeof updateTimer&&(updateTimer(),setInterval(updateTimer,1e3)),"function"==typeof checkVisibility&&(checkVisibility(),window.addEventListener("scroll",checkVisibility));const e=document.getElementById("contactForm");if(!e)return;const t=document.getElementById("result"),n=e.querySelector('button[type="submit"]'),s=(e,n="")=>{t.textContent=e,t.className=`meta ${n}`};e.addEventListener("submit",async t=>{t.preventDefault(),n.disabled=!0,s("Отправка...","loading");try{const t=new URLSearchParams(new FormData(e)),n=await fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),i=await n.json();s(i.message||"Ошибка",i.success?"success":"error"),i.success&&e.reset()}catch(e){console.error(e),s("Ошибка соединения. Попробуйте позже.","error")}finally{n.disabled=!1}})});
