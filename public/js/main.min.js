document.addEventListener("DOMContentLoaded",()=>{"function"==typeof updateTimer&&(updateTimer(),setInterval(updateTimer,1e3)),"function"==typeof checkVisibility&&(checkVisibility(),window.addEventListener("scroll",checkVisibility));const e=document.getElementById("contactForm");if(!e)return;const t=document.getElementById("result"),n=e.querySelector('button[type="submit"]'),r=(e,n="")=>{t.textContent=e,t.className=`meta ${n}`};e.addEventListener("submit",async t=>{t.preventDefault(),n.disabled=!0,r("Отправка...","loading");try{const t=await fetch("/api/signup",{method:"POST",body:new FormData(e)}),n=await t.json();if(!t.ok)throw new Error(n.message||"Server error");r(n.message,n.success?"success":"error"),n.success&&e.reset()}catch(e){console.error(e),r("Ошибка соединения. Попробуйте позже.","error")}finally{n.disabled=!1}})});
