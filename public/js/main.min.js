document.addEventListener("DOMContentLoaded",()=>{"function"==typeof updateTimer&&(updateTimer(),setInterval(updateTimer,1e3)),"function"==typeof checkVisibility&&(checkVisibility(),window.addEventListener("scroll",checkVisibility));const e=document.getElementById("contactForm");if(!e)return;const t=document.getElementById("result"),n=e.querySelector('button[type="submit"]'),s=(e,n="")=>{t.textContent=e,t.className=`meta ${n}`};e.addEventListener("submit",async t=>{t.preventDefault(),n.disabled=!0,s("Отправка...","loading");try{const t=await fetch("/api/signup",{method:"POST",body:new FormData(e)});let n=null;try{n=await t.json()}catch{throw new Error("Некорректный ответ сервера")}s(n.message||"Ошибка",n.success?"success":"error"),n.success&&e.reset()}catch(e){console.error(e),s("Ошибка соединения. Попробуйте позже.","error")}finally{n.disabled=!1}})});
